{"version":3,"sources":["../../../src/stringProcessing/matchParagraphs.js"],"names":["text","paragraphs","getParagraphsInTags","length","blocks","block","indexOf","split","regex","match","exec","push","paragraph"],"mappings":";;;;;;kBAgCe,UAAUA,IAAV,EAAiB;AAC/B,KAAIC,aAAaC,oBAAqBF,IAArB,CAAjB;;AAEA,KAAKC,WAAWE,MAAX,GAAoB,CAAzB,EAA6B;AAC5B,SAAOF,UAAP;AACA;;AAED;AACA,KAAIG,SAAS,qBAAWJ,IAAX,CAAb;;AAEAI,UAAS,sBAAQA,MAAR,EAAgB,UAAUC,KAAV,EAAkB;AAC1C;AACA,SAAO,MAAMA,MAAMC,OAAN,CAAe,IAAf,CAAb;AACA,EAHQ,CAAT;;AAKAL,cAAa,uBAASG,MAAT,EAAiB,UAAUC,KAAV,EAAkB;AAC/C,SAAOA,MAAME,KAAN,CAAa,MAAb,CAAP;AACA,EAFY,CAAb;;AAIA,KAAKN,WAAWE,MAAX,GAAoB,CAAzB,EAA6B;AAC5B,SAAOF,UAAP;AACA;;AAED;AACA,QAAO,CAAED,IAAF,CAAP;AACA,C;;AAzDD;;AAIA;;AAEA;;;;;AAKA,IAAIE,sBAAsB,SAAtBA,mBAAsB,CAAUF,IAAV,EAAiB;AAC1C,KAAIC,aAAa,EAAjB;AACA;AACA,KAAIO,QAAQ,2BAAZ;AACA,KAAIC,KAAJ;;AAEA,QAAQ,CAAEA,QAAQD,MAAME,IAAN,CAAYV,IAAZ,CAAV,MAAmC,IAA3C,EAAkD;AACjDC,aAAWU,IAAX,CAAiBF,KAAjB;AACA;;AAED;AACA,QAAO,mBAAKR,UAAL,EAAiB,UAAUW,SAAV,EAAsB;AAC7C,SAAOA,UAAW,CAAX,CAAP;AACA,EAFM,CAAP;AAGA,CAdD;;AAgBA","file":"matchParagraphs.js","sourcesContent":["import { map } from \"lodash-es\";\nimport { flatMap } from \"lodash-es\";\nimport { filter } from \"lodash-es\";\n\nimport { getBlocks } from \"../helpers/html\";\n\n/**\n * Matches the paragraphs in <p>-tags and returns the text in them.\n * @param {string} text The text to match paragraph in.\n * @returns {array} An array containing all paragraphs texts.\n */\nvar getParagraphsInTags = function( text ) {\n\tvar paragraphs = [];\n\t// Matches everything between the <p> and </p> tags.\n\tvar regex = /<p(?:[^>]+)?>(.*?)<\\/p>/ig;\n\tvar match;\n\n\twhile ( ( match = regex.exec( text ) ) !== null ) {\n\t\tparagraphs.push( match );\n\t}\n\n\t// Returns only the text from within the paragraph tags.\n\treturn map( paragraphs, function( paragraph ) {\n\t\treturn paragraph[ 1 ];\n\t} );\n};\n\n/**\n * Returns an array with all paragraphs from the text.\n * @param {string} text The text to match paragraph in.\n * @returns {Array} The array containing all paragraphs from the text.\n */\nexport default function( text ) {\n\tvar paragraphs = getParagraphsInTags( text );\n\n\tif ( paragraphs.length > 0 ) {\n\t\treturn paragraphs;\n\t}\n\n\t// If no <p> tags found, split on double linebreaks.\n\tvar blocks = getBlocks( text );\n\n\tblocks = filter( blocks, function( block ) {\n\t\t// Match explicit paragraph tags, or if a block has no HTML tags.\n\t\treturn 0 !== block.indexOf( \"<h\" );\n\t} );\n\n\tparagraphs = flatMap( blocks, function( block ) {\n\t\treturn block.split( \"\\n\\n\" );\n\t} );\n\n\tif ( paragraphs.length > 0 ) {\n\t\treturn paragraphs;\n\t}\n\n\t// If no paragraphs are found, return an array containing the entire text.\n\treturn [ text ];\n}\n"]}