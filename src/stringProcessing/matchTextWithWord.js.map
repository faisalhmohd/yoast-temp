{"version":3,"sources":["../../../src/stringProcessing/matchTextWithWord.js"],"names":["text","wordToMatch","locale","extraBoundary","matches","keyword","positions","indexOf","count","length","position","Math","min"],"mappings":";;;;;;kBAoBe,UAAUA,IAAV,EAAgBC,WAAhB,EAA6BC,MAA7B,EAAqCC,aAArC,EAAqD;AACnEH,QAAO,gCAAeA,IAAf,CAAP;AACAA,QAAO,qCAAiBA,IAAjB,CAAP;AACAA,QAAO,uBAAiBA,IAAjB,CAAP;AACAC,eAAc,2BAAa,uBAAiBA,WAAjB,CAAb,CAAd;;AAEA,KAAIG,UAAU,4CAAgCJ,IAAhC,EAAsCC,WAAtC,EAAmDC,MAAnD,EAA2DC,aAA3D,CAAd;AACAC,WAAU,mBAAKA,OAAL,EAAc,UAAUC,OAAV,EAAoB;AAC3C,SAAO,2BAAa,iCAAmBA,OAAnB,CAAb,CAAP;AACA,EAFS,CAAV;;AAIA;AACA,KAAMC,YAAY,mBAAKF,OAAL,EAAc,UAAUC,OAAV,EAAoB;AACnD,SAAOL,KAAKO,OAAL,CAAcF,OAAd,CAAP;AACA,EAFiB,CAAlB;;AAIA,QAAO;AACNG,SAAOJ,QAAQK,MADT;AAENL,WAASA,OAFH;AAGNM,YAAUC,KAAKC,GAAL,gCAAaN,SAAb;AAHJ,EAAP;AAKA,C;;AAvCD;;;;AAEA;;;;AACA;;;;AACA;;AACA;;;;AACA;;AACA;;;;oMATA;;AAWA","file":"matchTextWithWord.js","sourcesContent":["/** @module stringProcessing/matchTextWithWord */\n\nimport stripSomeTags from \"../stringProcessing/stripNonTextTags.js\";\n\nimport stripSpaces from \"../stringProcessing/stripSpaces.js\";\nimport removePunctuation from \"../stringProcessing/removePunctuation.js\";\nimport { unifyAllSpaces as unifyWhitespace } from \"../stringProcessing/unifyWhitespace.js\";\nimport matchStringWithTransliteration from \"../stringProcessing/matchTextWithTransliteration.js\";\nimport { normalize as normalizeQuotes } from \"../stringProcessing/quotes.js\";\nimport { map } from \"lodash-es\";\n\n/**\n * Returns the number of matches in a given string\n *\n * @param {string} text The text to use for matching the wordToMatch.\n * @param {string} wordToMatch The word to match in the text\n * @param {string} locale The locale used for transliteration.\n * @param {string} [extraBoundary] An extra string that can be added to the wordboundary regex\n * @returns {Object} The matches found and the number of matches.\n */\nexport default function( text, wordToMatch, locale, extraBoundary ) {\n\ttext = stripSomeTags( text );\n\ttext = unifyWhitespace( text );\n\ttext = normalizeQuotes( text );\n\twordToMatch = stripSpaces( normalizeQuotes( wordToMatch ) );\n\n\tlet matches = matchStringWithTransliteration( text, wordToMatch, locale, extraBoundary );\n\tmatches = map( matches, function( keyword ) {\n\t\treturn stripSpaces( removePunctuation( keyword ) );\n\t} );\n\n\t// Create an array of positions of matches to determine where in the text the wordToMatch occurred first.\n\tconst positions = map( matches, function( keyword ) {\n\t\treturn text.indexOf( keyword );\n\t} );\n\n\treturn {\n\t\tcount: matches.length,\n\t\tmatches: matches,\n\t\tposition: Math.min( ...positions ),\n\t};\n}\n"]}