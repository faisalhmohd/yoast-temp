{"version":3,"sources":["../../../src/researches/calculateFleschReading.js"],"names":["paper","score","text","getText","locale","getLocale","language","numberOfSentences","numberOfWords","numberOfSyllables","averageWordsPerSentence","getAverage","syllablesPer100Words","total","amount"],"mappings":";;;;;;kBA2Be,UAAUA,KAAV,EAAkB;AAChC,KAAIC,cAAJ;AACA,KAAIC,OAAOF,MAAMG,OAAN,EAAX;AACA,KAAMC,SAASJ,MAAMK,SAAN,EAAf;AACA,KAAMC,WAAW,2BAAaF,MAAb,CAAjB;AACA,KAAKF,SAAS,EAAd,EAAmB;AAClB,SAAO,CAAP;AACA;;AAEDA,QAAO,4BAAcA,IAAd,CAAP;;AAEA,KAAMK,oBAAoB,8BAAgBL,IAAhB,CAA1B;;AAEA,KAAMM,gBAAgB,0BAAYN,IAAZ,CAAtB;;AAEA;AACA,KAAKK,sBAAsB,CAAtB,IAA2BC,kBAAkB,CAAlD,EAAsD;AACrD,SAAO,CAAP;AACA;;AAED,KAAMC,oBAAoB,qBAAgBP,IAAhB,EAAsBE,MAAtB,CAA1B;AACA,KAAMM,0BAA0BC,WAAYH,aAAZ,EAA2BD,iBAA3B,CAAhC;AACA,KAAMK,uBAAuBH,qBAAsB,MAAMD,aAA5B,CAA7B;;AAEA,SAASF,QAAT;AACC,OAAK,IAAL;AACCL,WAAQ,SAAW,OAAOW,oBAAlB,GAA6C,OAASF,uBAA9D;AACA;AACD,OAAK,IAAL;AACCT,WAAQ,MAAMS,uBAAN,GAAkC,OAAOD,iBAAP,GAA2BD,aAArE;AACA;AACD,OAAK,IAAL;AACCP,WAAQ,MAAQ,MAAMS,uBAAd,GAA4C,MAAME,oBAA1D;AACA;AACD,OAAK,IAAL;AACCX,WAAQ,UAAY,MAAMO,aAAN,GAAsBD,iBAAlC,GAA0D,OAAOE,iBAAP,GAA2BD,aAA7F;AACA;;AAED,OAAK,IAAL;AACCP,WAAQ,SAAW,OAAOO,aAAP,GAAuBD,iBAAlC,GAA0D,MAAMK,oBAAxE;AACA;;AAED,OAAK,IAAL;AACCX,WAAQ,MAAQ,QAAQO,aAAR,GAAwBD,iBAAhC,GAAwD,OAAOE,iBAAP,GAA2BD,aAA3F;AACA;;AAED,OAAK,IAAL;AACA;AACCP,WAAQ,UAAY,QAAUS,uBAAtB,GAAsD,QAASD,oBAAoBD,aAA7B,CAA9D;AACA;AAzBF;;AA6BA,QAAO,4BAAcP,KAAd,CAAP;AACA,C;;AA/ED;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;;;;;;;AAVA;;AAiBA,IAAMU,aAAa,SAAbA,UAAa,CAAUE,KAAV,EAAiBC,MAAjB,EAA0B;AAC5C,QAAOD,QAAQC,MAAf;AACA,CAFD;;AAIA","file":"calculateFleschReading.js","sourcesContent":["/** @module analyses/calculateFleschReading */\n\nimport stripNumbers from \"../stringProcessing/stripNumbers.js\";\n\nimport countSentences from \"../stringProcessing/countSentences.js\";\nimport countWords from \"../stringProcessing/countWords.js\";\nimport countSyllables from \"../stringProcessing/syllables/count.js\";\nimport formatNumber from \"../helpers/formatNumber.js\";\nimport getLanguage from \"../helpers/getLanguage.js\";\n\n/**\n * Calculates an average from a total and an amount\n *\n * @param {number} total The total.\n * @param {number} amount The amount.\n * @returns {number} The average from the total and the amount.\n */\nconst getAverage = function( total, amount ) {\n\treturn total / amount;\n};\n\n/**\n * This calculates the flesch reading score for a given text.\n *\n * @param {object} paper The paper containing the text\n * @returns {number} The score of the flesch reading test\n */\nexport default function( paper ) {\n\tlet score;\n\tlet text = paper.getText();\n\tconst locale = paper.getLocale();\n\tconst language = getLanguage( locale );\n\tif ( text === \"\" ) {\n\t\treturn 0;\n\t}\n\n\ttext = stripNumbers( text );\n\n\tconst numberOfSentences = countSentences( text );\n\n\tconst numberOfWords = countWords( text );\n\n\t// Prevent division by zero errors.\n\tif ( numberOfSentences === 0 || numberOfWords === 0 ) {\n\t\treturn 0;\n\t}\n\n\tconst numberOfSyllables = countSyllables( text, locale );\n\tconst averageWordsPerSentence = getAverage( numberOfWords, numberOfSentences );\n\tconst syllablesPer100Words = numberOfSyllables * ( 100 / numberOfWords );\n\n\tswitch ( language ) {\n\t\tcase \"nl\":\n\t\t\tscore = 206.84 - ( 0.77 * syllablesPer100Words ) - ( 0.93 * ( averageWordsPerSentence  ) );\n\t\t\tbreak;\n\t\tcase \"de\":\n\t\t\tscore = 180 - averageWordsPerSentence - ( 58.5 * numberOfSyllables / numberOfWords );\n\t\t\tbreak;\n\t\tcase \"it\":\n\t\t\tscore = 217 - ( 1.3 * averageWordsPerSentence ) - ( 0.6 * syllablesPer100Words );\n\t\t\tbreak;\n\t\tcase \"ru\":\n\t\t\tscore = 206.835 - ( 1.3 * numberOfWords / numberOfSentences ) - ( 60.1 * numberOfSyllables / numberOfWords );\n\t\t\tbreak;\n\n\t\tcase \"es\":\n\t\t\tscore = 206.84 - ( 1.02 * numberOfWords / numberOfSentences ) - ( 0.6 * syllablesPer100Words );\n\t\t\tbreak;\n\n\t\tcase \"fr\":\n\t\t\tscore = 207 - ( 1.015 * numberOfWords / numberOfSentences ) - ( 73.6 * numberOfSyllables / numberOfWords );\n\t\t\tbreak;\n\n\t\tcase \"en\":\n\t\tdefault:\n\t\t\tscore = 206.835 - ( 1.015 * ( averageWordsPerSentence ) ) - ( 84.6 * ( numberOfSyllables / numberOfWords ) );\n\t\t\tbreak;\n\t}\n\n\n\treturn formatNumber( score );\n}\n"]}