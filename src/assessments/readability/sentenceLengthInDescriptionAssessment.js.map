{"version":3,"sources":["../../../../src/assessments/readability/sentenceLengthInDescriptionAssessment.js"],"names":["calculateSentenceLengthResult","sentences","i18n","score","percentage","recommendedValue","tooLongTotal","length","sentenceLengthURL","text","sprintf","dgettext","dngettext","sentenceLengthInDescriptionAssessment","paper","researcher","sentenceCount","getResearch","sentenceResult","assessmentResult","setScore","setText","identifier","getResult","isApplicable","hasDescription"],"mappings":";;;;;;AAAA;;;;AACA;;AACA;;AACA;;;;AACA;;;;;;AAEA;;;;;;AAMA,IAAIA,gCAAgC,SAAhCA,6BAAgC,CAAUC,SAAV,EAAqBC,IAArB,EAA4B;AAC/D,KAAIC,KAAJ;AACA,KAAIC,aAAa,CAAjB;AACA,KAAIC,mBAAmB,EAAvB;AACA,KAAIC,eAAe,wCAAuBL,SAAvB,EAAkCI,gBAAlC,EAAqDE,MAAxE;AACA,KAAMC,oBAAoB,yCAAwB,gCAAxB,CAA1B;;AAEA,KAAKP,UAAUM,MAAV,KAAqB,CAA1B,EAA8B;AAC7BH,eAAa,4BAAgBE,eAAeL,UAAUM,MAA3B,GAAsC,GAApD,CAAb;AACA;;AAED,KAAKH,cAAc,EAAnB,EAAwB;AACvB;AACAD,UAAQ,CAAR;AACA;;AAED,KAAK,kCAASC,UAAT,EAAqB,EAArB,EAAyB,EAAzB,CAAL,EAAqC;AACpC;AACAD,UAAQ,CAAR;AACA;;AAED,KAAKC,aAAa,EAAlB,EAAuB;AACtB;AACAD,UAAQ,CAAR;AACA;;AAED,KAAKA,SAAS,CAAd,EAAkB;AACjB,SAAO;AACNA,UAAOA,KADD;AAENM,SAAMP,KAAKQ,OAAL,CAAcR,KAAKS,QAAL,CACnB,kBADmB;AAEnB;AACA;AACA,wEAJmB,CAAd,EAKHH,iBALG,EAKgBH,gBALhB,EAKkC,MALlC;AAFA,GAAP;AAUA;AACD,QAAO;AACNF,SAAOA,KADD;AAENM,QAAMP,KAAKQ,OAAL,CAAcR,KAAKU,SAAL,CACnB,kBADmB;AAEnB;AACA;AACA,sGAJmB,EAKnB,uGALmB,EAMnBN,YANmB,CAAd,EAMWA,YANX,EAMyBE,iBANzB,EAM4CH,gBAN5C,EAM8D,MAN9D;AAFA,EAAP;AAWA,CAjDD;;AAmDA;;;;;;;;AAQA,IAAIQ,wCAAwC,SAAxCA,qCAAwC,CAAUC,KAAV,EAAiBC,UAAjB,EAA6Bb,IAA7B,EAAoC;AAC/E,KAAIc,gBAAgBD,WAAWE,WAAX,CAAwB,+BAAxB,CAApB;AACA,KAAIC,iBAAiBlB,8BAA+BgB,aAA/B,EAA8Cd,IAA9C,CAArB;AACA,KAAIiB,mBAAmB,gCAAvB;;AAEAA,kBAAiBC,QAAjB,CAA2BF,eAAef,KAA1C;AACAgB,kBAAiBE,OAAjB,CAA0BH,eAAeT,IAAzC;;AAEA,QAAOU,gBAAP;AACA,CATD;;kBAWe;AACdG,aAAY,+BADE;AAEdC,YAAWV,qCAFG;AAGdW,eAAc,sBAAUV,KAAV,EAAkB;AAC/B,SAAOA,MAAMW,cAAN,EAAP;AACA;AALa,C","file":"sentenceLengthInDescriptionAssessment.js","sourcesContent":["import formatNumber from \"../../helpers/formatNumber\";\nimport { inRangeEndInclusive as inRange } from \"../../helpers/inRange\";\nimport { createAnchorOpeningTag } from \"../../helpers/shortlinker\";\nimport AssessmentResult from \"../../values/AssessmentResult\";\nimport countTooLongSentences from \"./../../assessmentHelpers/checkForTooLongSentences\";\n\n/**\n * Calculates sentence length score\n * @param {array} sentences The array containing sentences.\n * @param {object} i18n The object used for translations.\n * @returns {object} Object containing score and text.\n */\nvar calculateSentenceLengthResult = function( sentences, i18n ) {\n\tvar score;\n\tvar percentage = 0;\n\tvar recommendedValue = 20;\n\tvar tooLongTotal = countTooLongSentences( sentences, recommendedValue ).length;\n\tconst sentenceLengthURL = createAnchorOpeningTag( \"https://yoa.st/short-sentences\" );\n\n\tif ( sentences.length !== 0 ) {\n\t\tpercentage = formatNumber( ( tooLongTotal / sentences.length ) * 100 );\n\t}\n\n\tif ( percentage <= 20 ) {\n\t\t// Green indicator.\n\t\tscore = 9;\n\t}\n\n\tif ( inRange( percentage, 20, 25 ) ) {\n\t\t// Orange indicator.\n\t\tscore = 6;\n\t}\n\n\tif ( percentage > 25 ) {\n\t\t// Red indicator.\n\t\tscore = 3;\n\t}\n\n\tif ( score >= 7 ) {\n\t\treturn {\n\t\t\tscore: score,\n\t\t\ttext: i18n.sprintf( i18n.dgettext(\n\t\t\t\t\"js-text-analysis\",\n\t\t\t\t// Translators: %1$s expands to a link on yoast.com, %2$s expands to the recommended maximum sentence length,\n\t\t\t\t// %3$s expands to the anchor end tag.\n\t\t\t\t\"The meta description contains no sentences %1$sover %2$s words%3$s.\"\n\t\t\t), sentenceLengthURL, recommendedValue, \"</a>\"\n\t\t\t),\n\t\t};\n\t}\n\treturn {\n\t\tscore: score,\n\t\ttext: i18n.sprintf( i18n.dngettext(\n\t\t\t\"js-text-analysis\",\n\t\t\t// Translators: %1$d expands to number of sentences, %2$s expands to a link on yoast.com,\n\t\t\t// %3$s expands to the recommended maximum sentence length, %4$s expands to the anchor end tag.\n\t\t\t\"The meta description contains %1$d sentence %2$sover %3$s words%4$s. Try to shorten this sentence.\",\n\t\t\t\"The meta description contains %1$d sentences %2$sover %3$s words%4$s. Try to shorten these sentences.\",\n\t\t\ttooLongTotal ), tooLongTotal, sentenceLengthURL, recommendedValue, \"</a>\"\n\t\t),\n\t};\n};\n\n/**\n * Scores the percentage of sentences including more than the recommended number of words.\n *\n * @param {object} paper The paper to use for the assessment.\n * @param {object} researcher The researcher used for calling research.\n * @param {object} i18n The object used for translations.\n * @returns {object} The Assessmentresult\n */\nvar sentenceLengthInDescriptionAssessment = function( paper, researcher, i18n ) {\n\tvar sentenceCount = researcher.getResearch( \"countSentencesFromDescription\" );\n\tvar sentenceResult = calculateSentenceLengthResult( sentenceCount, i18n );\n\tvar assessmentResult = new AssessmentResult();\n\n\tassessmentResult.setScore( sentenceResult.score );\n\tassessmentResult.setText( sentenceResult.text );\n\n\treturn assessmentResult;\n};\n\nexport default {\n\tidentifier: \"metaDescriptionSentenceLength\",\n\tgetResult: sentenceLengthInDescriptionAssessment,\n\tisApplicable: function( paper ) {\n\t\treturn paper.hasDescription();\n\t},\n};\n"]}